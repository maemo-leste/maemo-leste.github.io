<!doctype html>
<!--
▄ •▄ ▄▄▄        ▄ •▄ ▄▄▄ .▄▄▄▄▄
█▌▄▌▪▀▄ █·▪     █▌▄▌▪▀▄.▀·•██
▐▀▀▄·▐▀▀▄  ▄█▀▄ ▐▀▀▄·▐▀▀▪▄ ▐█.▪
▐█.█▌▐█•█▌▐█▌.▐▌▐█.█▌▐█▄▄▌ ▐█▌·
·▀  ▀.▀  ▀ ▀█▄▀▪·▀  ▀ ▀▀▀  ▀▀▀
-->
<html lang="en" data-bs-theme="dark">
<head>
      <title>Maemo Leste - A deep dive into building Maemo Leste packages on Forgejo</title>

  <meta charset="utf-8" />
  <meta content='width=device-width, initial-scale=1.0' name='viewport' />
  <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Cousine' media='all' />
  <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Inconsolata' media='all' />

  <link rel="icon" type="image/x-icon" href="/theme/img/favicon.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <link rel='stylesheet' href="https://maemo-leste.github.io/theme/css/pygment.css" media='all' />
  <script src="https://maemo-leste.github.io/theme/js/jquery-1.11.2.min.js"></script>
  <script src="https://maemo-leste.github.io/theme/js/jquery.color-2.1.2.min.js"></script>

  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/octicons/3.1.0/octicons.css"/>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

  <link rel="stylesheet" href="/theme/css/maemo.css">
  <script src="/theme/js/index.js"></script>




        <meta name="tags" contents="forgejo" />
        <meta name="tags" contents="maemo" />
        <meta name="tags" contents="leste" />
        <meta name="tags" contents="build" />
        <meta name="tags" contents="integration" />
</head>

<body>

<nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container-fluid">

    <a class="navbar-brand" href="https://maemo-leste.github.io/">
      <img src="/images/logo_small_w2.png" class="me-2" height="28" alt="Kroket Logo" loading="lazy"/>
      <span style="margin-top:4px;">Maemo Leste</span>
    </a>

    <style>
      .navbar-brand {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 46px;
        text-decoration: none;
      }
    </style>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="https://maemo-leste.github.io/category/news.html">News</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://maedevu.maemo.org/images/">Downloads</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://maedevu.maemo.org/pkgweb/">Packages</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://leste.maemo.org/">Wiki</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://maedevu.maemo.org/images/">Download</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://maemo-leste.github.io/pages/screenshots.html">Screenshots</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid container-article-jumbo container-article-page-image jumbo">
  <a id="header_href" href="#">
  <div class="jumbotron jumbo-3 jumbotron-fluid pt-5 img-fluid" style="background-image: url(/images/rain.jpg);">
  </div>
  </a>
</div>

<div class="container-fluid container-article pb-2">
  <h2 id="header_title" class="display-6 pt-3 mb-1">A deep dive into building Maemo Leste packages on Forgejo </h2>

  <div class="mb-3 article_tags">
      <a href="tag/forgejo.html">
        <span class="badge badge-primary badge-tag">forgejo</span>
      </a>
      <a href="tag/maemo.html">
        <span class="badge badge-primary badge-tag">maemo</span>
      </a>
      <a href="tag/leste.html">
        <span class="badge badge-primary badge-tag">leste</span>
      </a>
      <a href="tag/build.html">
        <span class="badge badge-primary badge-tag">build</span>
      </a>
      <a href="tag/integration.html">
        <span class="badge badge-primary badge-tag">integration</span>
      </a>
    <small> <span style="margin-left:4px;margin-right:4px;">|</span>       2025-07-29
    </small>
  </div>

  <div class="row d-none m-0 p-0">
    <div class="col-md-12">
    </div>
  </div>

  <div class="row mt-2">
    <div class="col-md-12 article_content article_page mt-2">
      <p>labels = for arch and default images
jobs.*.container.image = for chimaera/daedalus/excalibur, etc</p>
<p>misschien is er met strategy en matrix nog iets te doen</p>
<p>01:35 &lt;Wizzup&gt; ik denk dat we idd wel onze eigen docker registry willen uiteindelijk
01:40 &lt;Wizzup&gt; om een paar redenen:
01:41 &lt;Wizzup&gt; we willen armhf, arm64 en amd64 images die allemaal hetzelfde hebben
01:41 &lt;Wizzup&gt; we willen images die onze repos er ook in hebben
01:41 &lt;Wizzup&gt; we willen images die ook onze verschillende cpu flags en andere flags aan hebben</p>
<p>git clone <a class="reference external" href="https://code.forgejo.org/forgejo/runner">https://code.forgejo.org/forgejo/runner</a>
GOOS=linux GOARCH=arm make</p>
<dl class="docutils">
<dt>Idee:</dt>
<dd><p class="first">Forgejo experimental repository, die ook onze stable en devel repository pulled,
en dan kunnen we met een tooltje forgejo pkgs importeren in onze main repo.
Moeten we alleen de versie selection fixen, maar dat kan best redelijk
gedaan worden volgens mij.</p>
<p class="last"><a class="reference external" href="https://forgejo.org/docs/v1.20/user/packages/debian/">https://forgejo.org/docs/v1.20/user/packages/debian/</a></p>
</dd>
</dl>
<p><a class="reference external" href="https://git.maemo.org/leste-cicd/-/packages">https://git.maemo.org/leste-cicd/-/packages</a></p>
<p>Docker base images:</p>
<blockquote>
<p><a class="reference external" href="https://git.devuan.org/paddy-hack/container-images">https://git.devuan.org/paddy-hack/container-images</a>
<a class="reference external" href="https://docs.docker.com/build/building/base-images/#create-a-full-image-using-tar">https://docs.docker.com/build/building/base-images/#create-a-full-image-using-tar</a>
<a class="reference external" href="https://forgejo.org/docs/latest/user/packages/container/">https://forgejo.org/docs/latest/user/packages/container/</a></p>
<p>SEE <a class="reference external" href="https://git.maemo.org/leste-cicd/devuan-base-containers">https://git.maemo.org/leste-cicd/devuan-base-containers</a> FOR DEBOOTSTRAP AND DOCKER</p>
<p>RESULT: <a class="reference external" href="https://git.maemo.org/leste-cicd/-/packages">https://git.maemo.org/leste-cicd/-/packages</a></p>
<p>En dan hebben we een base-base, die kunnen we dan aanpassen met onze
changes in een Dockerfile:
* dpkg-buildflags
* onze repos
* onze repo key
* etc</p>
<ul class="simple">
<li>en die dan gebruiken voor bouwen</li>
</ul>
</blockquote>
<dl class="docutils">
<dt>Secrets management:</dt>
<dd><a class="reference external" href="https://forgejo.org/docs/v1.21/user/actions/#secrets">https://forgejo.org/docs/v1.21/user/actions/#secrets</a></dd>
</dl>
<p><a class="reference external" href="https://forgejo.org/docs/latest/user/packages/debian/#configuring-the-package-registry">https://forgejo.org/docs/latest/user/packages/debian/#configuring-the-package-registry</a>
<a class="reference external" href="https://forgejo.org/docs/latest/user/packages/debian/#configuring-the-package-registry">https://forgejo.org/docs/latest/user/packages/debian/#configuring-the-package-registry</a></p>
<dl class="docutils">
<dt>Forgejo issues:</dt>
<dd><a class="reference external" href="https://codeberg.org/forgejo/forgejo/issues/8780">https://codeberg.org/forgejo/forgejo/issues/8780</a></dd>
</dl>
<p>Does not need node (yay)</p>
<blockquote>
<p><a class="reference external" href="https://github.com/taiki-e/checkout-action">https://github.com/taiki-e/checkout-action</a></p>
<p><a class="reference external" href="https://git.maemo.org/MerlijnWajer/upload-artifact/">https://git.maemo.org/MerlijnWajer/upload-artifact/</a></p>
</blockquote>
<p><a class="reference external" href="https://git.maemo.org/leste-cicd/-/packages/container/daedalus-maemo-amd64/latest">https://git.maemo.org/leste-cicd/-/packages/container/daedalus-maemo-amd64/latest</a></p>
<p><a class="reference external" href="https://git.maemo.org/leste-extras/-/packages">https://git.maemo.org/leste-extras/-/packages</a></p>
<p><a class="reference external" href="https://wizzup.org/protected-branches.png">https://wizzup.org/protected-branches.png</a></p>
<p><a class="reference external" href="https://git.maemo.org/org/leste-extras/teams/extras-team">https://git.maemo.org/org/leste-extras/teams/extras-team</a></p>
<p>Template repos
<a class="reference external" href="https://git.maemo.org/leste-extras/template">https://git.maemo.org/leste-extras/template</a></p>
<dl class="docutils">
<dt>TODO:</dt>
<dd><p class="first">lowered polling rates in the runner</p>
<p class="last">Maybe re-enable cache when we have versioned our composite actions</p>
</dd>
</dl>

    </div>
    <div class="col-md-12 text-muted">
      <span class="d-block">Merlijn Wajer</span>
    </div>
  </div>
</div>


<footer class="page-footer font-small blue-grey lighten-5 mt-5">
  <style>
    footer a {
      width: inherit !important;
    }
  </style>
    <!-- Footer -->
    <div class="footer gradient-2">
      <div class="container footer-container">
        <div class="col-md-12">
          <div style="width: 100%" class="mb-2 mt-2">
            <a href="http://ec.europa.eu/index_en.htm"><img src="/images/eu.png" width="100"></a>&nbsp;&nbsp;&nbsp;
            <a href="https://www.ngi.eu"><img src="/images/ngi.png" width="100"></a>&nbsp;&nbsp;&nbsp;
            <a href="https://nlnet.nl"><img src="/images/nlnet-w.svg" width="100"></a>&nbsp;&nbsp;
          </div>

          <div class="footer-title"></div>
          <ul class="list-unstyled">
              <li><a href="https://maemo-leste.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"></a></li>
          </ul>

          <div class="row">

          <div class="col-md-3">
          <div class="footer-title"></div>
          <ul class="list-unstyled">
              <li><a href="https://twitter.com/maemoleste" target="_blank">Twitter</a></li>
              <li><a href="https://github.com/maemo-leste" target="_blank">Github</a></li>
              <li><a href="/feeds/all.atom.xml" target="_blank">Atom Feed</a></li>
          </ul>
          </div>

          <div class="col-md-3">
          <div class="footer-title"></div>
          <ul class="list-unstyled">
              <li><a href="https://github.com/maemo-leste/bugtracker/issues" target="_blank">Maemo Leste Bugtracker</a></li>
              <li><a href="https://leste.maemo.org" target="_blank">Maemo Leste Wiki</a></li>
              <li><a href="https://maedevu.maemo.org/pkgweb/" target="_blank">Maemo Leste Packages</a></li>
          </ul>
          </div>
          </div>
        </div>
          <!-- <div class="row text-center">
                  <a href="http://ec.europa.eu/index_en.htm"><img src="/images/eu.png" width="80"></a>&nbsp;&nbsp;
                  <a href="https://www.ngi.eu"><img src="/images/ngi.png" width="80"></a>&nbsp;&nbsp;
                  <a href="https://nlnet.nl"><img src="/images/nlnet-w.svg" width="80"></a>&nbsp;&nbsp;
          </div>
          <div class="row text-center"></div>

          </div>
        -->
      </div>
  </div>
  <!-- /Footer -->
</footer>
</body>

</html>